<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="shortcut icon" href="./img/favicon.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/mediaQueries.css">
    <title>Paw | PetShop</title>
</head>
<body>
    <header>
        <!-- Topbar Start -->
        <div class="topbar">
            <nav class="contact-info">
                <ul class="grid-container">
                    <li class="contact-item grid-item">
                        <div class="contact-content">
                            <span class="icon-email">
                                <i class="fa-regular fa-envelope"></i>
                            </span>
                            <div class="text-email">
                                <p>info@pawpetshop.com</p>
                            </div>
                        </div>
                    </li>
                    <li class="contact-item grid-item">
                        <div class="contact-content">
                            <span class="icon-phone">
                                <i class="fa-solid fa-phone"></i>
                            </span>
                            <div class="text-phone">
                                <p>+54 1122 334455</p>
                            </div>
                        </div>
                    </li>
                    <li class="contact-item grid-item">
                        <div class="social-media">
                            <div class="icon-rrss">
                                <div class="search">
                                    <input type="text" placeholder="Búsqueda " id="search-input">
                                </div>      
                                <span><i class="fa-brands fa-facebook-f"></i></span>
                                <span><i class="fa-brands fa-x-twitter"></i></span>
                                <span><i class="fa-brands fa-instagram"></i></span>
                            </div>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
        <!-- Topbar End -->

        <!-- Navbar Start -->
        <nav class="navbar">
            <img src="./img/isologo.png" class="logo" alt="logo petshop paw">
            <!-- <input type="checkbox" id="menu-check">
            <label id="menu" for="menu-check">
                <span id="menu-abrir">&#9776;</span>
                <span id="menu-cerrar">X</span>
            </label> -->
            <ul class="menu" id="menu">
                <!-- <li><a href="#">Home</a></li> -->
                <li><a href="./pages/services.html">Servicios</a>
                    <ul class="submenu" id="submenu">
                        <li><a href="./pages/services.html#alojamiento">Alojamiento para Mascotas</a></li>
                        <li><a href="https://www.petfinder.com/cat/nebula-124/nj/jersey-city/nj333-petfinder-test-account/?referrer_id=d7e3700b-2e07-11e9-b3f3-0800275f82b1">
                            Adopciones</a></li>
                        <li><a href="./pages/services.html#servicios">Aseo y tratamiento de mascotas</a></li>
                        <li><a href="./pages/services.html#entrenamientoDeMascotas">Entrenamiento de Mascotas</a></li>
                        <li><a href="./pages/services.html#colocacionDeMicrochip">Colocación de microchip</a></li>
                    </ul>
                <li><a href="./pages/products.html">Productos</a></li>
                <!-- <li><a href="./pages/about.html">Nosotros</a></li> -->
                <!-- <li><a href="./pages/about.html">Nosotros</a></li> -->
                <li><a href="./pages/contact.html">Contacto</a></li>
            </ul>
            <div class="menu-bar" id="menu-bar">
                <i class="fa-solid fa-bars"></i>
            </div>
            <div class="heart">
                <i class="fa-regular fa-heart"></i>
            </div>
            <div class="user">
                <i class="fa-regular fa-user"></i>
            </div>
            <div class="shopping">
                <i class="fa-solid fa-cart-shopping"></i>
            </div>
        </nav>
<body>
    <h1 class="text-center">Agregar Productos al Inventario</h1>
   
    
    <!--enctype="multipart/form-data es necesario para enviar archivos al back.-->
    <form action="/productos" method="POST">
    <label for="codigo">Código:</label>
    <input type="text" id="codigo" name="codigo" required><br>
    <label for="nombre">Nombre:</label>
    <input type="text" id="codigo" name="codigo" required><br>
    <label for="descripcion">Descripción:</label>
    <input type="text" id="descripcion" name="descripcion" required><br>
    <label for="stock">Stock:</label>
    <input type="number" id="stock" name="stock" required><br>
    <label for="tamanio">Tamaño:</label>
    <input type="text" id="tamanio" name="tamanio" required><br>
    <label for="precio">Precio:</label>
    <input type="number" step="0.01" id="precio" name="precio" required><br>
    <label for="imagenProducto">Imagen del producto:</label>
    <input type="file" id="imagenProducto" name="imagen">
    <label for="proveedorProducto">Proveedor:</label>
    <input type="text" id="proveedorProducto" name="proveedor">
    <button type="submit">Agregar Producto</button>
    <a href="index.html">Menu principal</a>
    </form>
</body>

<script>
    const URL = "http://127.0.0.1:5000/"
    // Capturamos el evento de envío del productos
    document.getElementById('/productos/<int:codigo>').addEventListener('submit', function (event) {
    event.preventDefault(); // Evitamos que se envie el form
    var formData = new FormData();
    formData.append('codigo', document.getElementById('codigo').value);
    formData.append('descripcion', document.getElementById('descripcion').value);
    formData.append('stock', document.getElementById('stock').value);
    formData.append('tamanio', document.getElementById('tamanio').value);
    formData.append('precio', document.getElementById('precio').value);
    formData.append('proveedor', document.getElementById('proveedorProducto').value);
    formData.append('imagen', document.getElementById('imagenProducto').files[0]);
    fetch(URL + '/productos', {
    method: 'POST',
    body: formData // Aquí enviamos formData en lugar de JSON
    })
    .then(function (response) {
    if (response.ok) { return response.json(); }
    })
    .then(function (data) {
    alert('Producto agregado correctamente.');
    // Limpiar el formulario para el proximo producto
    document.getElementById('codigo').value = "";
    document.getElementById('descripcion').value = "";
    document.getElementById('stock').value = "";
    document.getElementById('tamanio').value = "";
    document.getElementById('precio').value = "";
    document.getElementById('imagen').value = "";
    document.getElementById('proveedor').value = "";
    })
    .catch(function (error) {
    // Mostramos el error, y no limpiamos el form.
    alert('Error al agregar el producto.');
    });
    })
    </script>
    <footer class="footer">
        <div class="logo">
            <!-- <picture class=""> -->
                <img alt="full logo" src="./img/isologo.png">
            <!-- </picture> -->
        </div>

        <div class="left">
            <ul class="list-pages">
                <li class="item"><a href="#" class="link">Empresa</a></li>
                <li class="item"><a href="../pages/contact.html" class="link">Contacto</a></li>
                <li class="item"><a href="#" class="link">Blog</a></li>
                <li class="item"><a href="../pages/terminosyCondiciones.html" class="link">Términos y Condiciones</a></li>
                <li class="item"><a href="../pages/botonDeArrepentimiento.html" class="link">Botón de Arrepentimiento</a></li>
            </ul>
        </div>
        
        <div class="right">
            <!-- <h5 class="title">Suscríbete a nuestro Newsletter</h5>
            <form action="" class="data">
                <input type="email" placeholder="nombre@mail.com" class="email">
                <input type="submit" value="Enviar" class="submit">
            </form> -->
            <h5 class="rrss">Nuestras Redes Sociales</h5>
            <ul class="list-rrss">
                <li><i class="fa-brands fa-facebook-f"></i></li>
                <li><i class="fa-brands fa-x-twitter"></i></li>
                <li><i class="fa-brands fa-instagram"></i></li>
            </ul>
        </div>




        <div class="foot">
            <p class="copy-bigfoot">Todos los derechos reservados ©2023 | Hecho con <span class="heart">♥️ </span>by  <a href="#">Paw PetShop</a>.</p>
        </div>

        <div class="dog-snout" style="width: 10%; height: 10%;">
            <img src="./img/dog-snout.png">
        </div>
    </footer>



    <script src="https://kit.fontawesome.com/7a9e4a4ed4.js" crossorigin="anonymous"></script>
    <script src="./js/script.js"></script>
</body>
</html>